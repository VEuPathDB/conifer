#!/usr/bin/perl

use lib "$ENV{GUS_HOME}/lib/perl";

use FgpUtil::Util::ProjectBrancher;
use strict;

my $branch = $ARGV[0];
my $comment = $ARGV[1];
my $delete = $ARGV[2];

usage() unless ($branch && $comment);
usage() if ($delete && $delete ne '-delete');

my @projects = ('EuPathSiteCommon:apidb', 'EuPathWebSvcCommon:apidb', 'ApiCommonData:apidb', 'ApiCommonShared:apidb', 'ApiCommonWebService:apidb', 'ApiCommonWebsite:apidb', 'ApiCommonWorkflow:apidb', 'CBIL:gus', 'DJob:gus', 'DoTS:apidb', 'EuPathDatasets:apidb', 'FgpUtil:gus', 'GGTools:apidb', 'GusAppFramework:gus', 'GusSchema:gus', 'install:gus', 'OrthoMCLData:apidb', 'OrthoMCLEngine:apidb', 'OrthoMCLShared:apidb', 'OrthoMCLWebsite:apidb', 'ReFlow:gus', 'WDK:gus', 'WSF:gus', 'WDKTemplateSite:gus', 'WSFTemplate:gus');

FgpUtil::Util::ProjectBrancher::branch($branch, $comment, $delete, \@projects);

sub usage {
  die "
Branch all of the Fgp software using a single branch name.  The recommended branch name is a numeral.  Operates directly in svn, not your local dirs.

usage: fgpBranch branch_name comment [-delete]

-delete deletes the branch from all projects.

";

}
